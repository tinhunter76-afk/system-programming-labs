ПРАКТИКА 2: ПОТОКИ, СИНХРОНИЗАЦИЯ, СИГНАЛЫ

Задание 2-2: Синхронизация с мьютексами
Описание задания: Глобальная переменная counter=0. Создать 5 потоков, каждый увеличивает counter 1000 раз. Показать результат БЕЗ мьютекса (<5000, race condition) и С мьютексом (=5000)
Требования:
Используйте pthread_mutex_t
Функции: pthread_mutex_init(), pthread_mutex_lock(), pthread_mutex_unlock(), pt hread_mutex_destroy()
Варианты:

Результаты вывода:

1. Без мьютекса: counter = 1000 (ожидалось < 5000)

2. С мьютексом: counter = 5000 (ожидалось 5000)

Примечания:
Сделал 2 файла по отдельности:
no_mutex - без мьютекса
with_mutex - с мьютексом

в 1. пришлось добавить sched_yield(), чтобы увеличить вероятность переключения потоков. Без этого результат был counter = 5000

Вывод:

В программе без использования мьютекса возникает race condition, из-за чего итоговое значение счётчика меньше ожидаемого.
При использовании pthread_mutex_lock() и pthread_mutex_unlock() доступ к общей переменной синхронизирован, и результат становится корректным.


